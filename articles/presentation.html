<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="optiRum">
<title>Presentation components • optiRum</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Presentation components">
<meta property="og:description" content="optiRum">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">optiRum</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.41.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/presentation.html">Presentation components</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jumpingrivers/optiRum/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="presentation_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Presentation components</h1>
                        <h4 data-toc-skip class="author">Steph Locke</h4>
            
            <h4 data-toc-skip class="date">2022-05-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jumpingrivers/optiRum/blob/HEAD/vignettes/presentation.Rmd" class="external-link"><code>vignettes/presentation.Rmd</code></a></small>
      <div class="d-none name"><code>presentation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="cut2-in-latex">cut2 in LaTeX<a class="anchor" aria-label="anchor" href="#cut2-in-latex"></a>
</h2>
<p>A minor thing but one that caused significant headaches is the wonderful <code>cut2()</code> function from <a href="https://cran.r-project.org/package=Hmisc" class="external-link">Hmisc</a>. <code>cut2()</code> is a more flexible boundary generating function that produces (IMO) better intervals i.e.</p>
<ul>
<li>(0,5] is the <code>cut</code> interval and this means all numbers greater than 0 and less than or equal to 5</li>
<li>[0,5) is the <code>cut2</code> interval and this means all numbers greater than or equal to 0 and less than 5</li>
</ul>
<p>The <code>cut2</code> way ensures there are fewer allocation issues due to rounding with a large number of decimal places. Unfortunately when you try to make a table of these in LaTeX, it thinks you’re trying to go into “maths mode”.</p>
<p>To avoid this I wrote a <code><a href="../reference/sanitise.html">sanitise()</a></code> function to replace the <code>sanitize()</code> function from <a href="https://cran.r-project.org/package=knitr" class="external-link">knitr</a> so that it will escape any <code>[</code> characters a table output from R. Whilst I was giving it a UK name (to save function masking issues), I also extended it to correctly handle the GBP symbol (<code>\u00a310</code>) since that was also an issue for us.</p>
</div>
<div class="section level2">
<h2 id="charts">Charts<a class="anchor" aria-label="anchor" href="#charts"></a>
</h2>
<p>optiRum contains a <code><a href="../reference/theme_optimum.html">theme_optimum()</a></code> (after the company, not an adjective) that changes the ggplot2 default chart look. The ggplot2 themes are good to begin with, and others have extended it further e.g. <a href="https://cran.r-project.org/package=ggthemes" class="external-link">ggthemes</a>, but we wanted a standard within our company that we could use for charts. There were some considerations:</p>
<ul>
<li>colleagues love to print, despite best efforts to dissuade them, but to meet IT halfway they print 4 A4 pages per sheet (2 pages on each side) so the chart labels need to be legible when printed to less than 50% of their intended size</li>
<li>a lot of our charts are over time and colleagues like to compare values so having y-axis grid lines can aid them</li>
<li>labels whilst needing to be legible should be de-emphasised to help keep focus on the chart’s message</li>
<li>as much of the plot area should be given over to the chart as possible so space for legends should be minimised</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jumpingrivers/optiRum" class="external-link">optiRum</a></span><span class="op">)</span>
 
<span class="va">basicplot</span><span class="op">&lt;-</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">iris</span>, 
                  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Sepal.Width</span>, y<span class="op">=</span><span class="va">Sepal.Length</span>, colour<span class="op">=</span><span class="va">Species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span>
 
<span class="fu"><a href="../reference/multiplot.html">multiplot</a></span><span class="op">(</span><span class="va">basicplot</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"theme_bw()"</span><span class="op">)</span>, 
          <span class="va">basicplot</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"theme_minimal()"</span><span class="op">)</span>, 
          <span class="va">basicplot</span><span class="op">+</span><span class="fu"><a href="../reference/theme_optimum.html">theme_optimum</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"theme_optimum()"</span><span class="op">)</span>, layout<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="presentation_files/figure-html/unnamed-chunk-1-1.png" width="480"></p>
</div>
<div class="section level2">
<h2 id="generate-pdfs">Generate PDFs<a class="anchor" aria-label="anchor" href="#generate-pdfs"></a>
</h2>
<p>Using knitr to integrate analysis and content via LaTeX is fantastic. Unfortunately, where our documents using LaTeX via the R package knitr. We can end up with some pretty complex documents that need multiple passthroughs to fully typeset.</p>
<p>Unfortunately, the handy “Compile PDF” button in RStudio, whilst great for simple documents could end up not doing enough passthroughs. At the same time it would generate lots of extra files and you’d have no control over the file name when it was generated.</p>
<p>To get around this I first used build scripts that did a lot of compensating work around the <code>knit2pdf()</code> function to do the various bits and pieces. This became relatively standard but there would be exceptions or different people would write date suffixes differently. <code><a href="../reference/generatePDF.html">generatePDF()</a></code> is my answer to the various issues we encountered, including some pesky environment interactions with data.table.</p>
<p><code><a href="../reference/generatePDF.html">generatePDF()</a></code> takes the following arguments (lots have defaults):</p>
<ul>
<li>
<code>srcpath</code> is a folder relative to the current directory so that you don’t have to change working directories</li>
<li>
<code>srcname</code> is the file name, less the Rnw extension, as it was easier to type plus enforced the use case</li>
<li>
<code>destpath</code> is the output folder, again relative to the current directory, to give better routing as we rarely wanted the PDF among the source code</li>
<li>
<code>destname</code> is the file name we want the document output as (less <code>.pdf</code>) so that we’re no reliant on the source file’s name</li>
<li>
<code>DATED</code> gives a date suffix to the file meaning different versions can generated over different days with unique file references (enabling the way some folks were, or provided model variants over time)</li>
<li>
<code>CLEANUP</code> says whether to remove all the pesky extra files that generating a PDF can produce</li>
<li>
<code>QUIET</code> allows you to produce a PDF with less console activity, making it less burdensome for automated tasks</li>
<li>more like environment and passthroughs to <code>knit2pdf()</code>
</li>
</ul>
<p>The best place to check out examples of the <code><a href="../reference/generatePDF.html">generatePDF()</a></code> are in the unit tests.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rhian Davies, Steph Locke, Jumping Rivers, Optimum Credit Ltd’s analysts.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
